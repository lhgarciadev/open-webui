# Fase 0.2 - Validar Prerrequisitos

## Objetivo

Verificar que todos los prerrequisitos están correctamente configurados antes de crear el Space.

## Prompt de Validación

```
Valida los prerrequisitos para migrar Ollama a Hugging Face:

1. VERIFICAR CUENTA HF:

   # Debe mostrar tu usuario
   huggingface-cli whoami

   # Resultado esperado:
   # Your name: [tu_usuario]
   # Your organizations: [lista o vacío]

2. VERIFICAR PERMISOS DEL TOKEN:

   # Test de permisos (crear repo de prueba)
   huggingface-cli repo create test-permissions --type space -y

   # Si funciona, eliminar repo de prueba
   huggingface-cli repo delete test-permissions --type space -y

   # Si falla con "403", el token no tiene permisos Write

3. VERIFICAR GIT CREDENTIALS:

   # Clonar repo de prueba (usa credenciales HF)
   git clone https://huggingface.co/spaces/huggingface/welcome --depth 1 /tmp/hf-test

   # Limpiar
   rm -rf /tmp/hf-test

   # Si pide contraseña, las credenciales no están configuradas

4. VERIFICAR VERSIONES:

   # CLI de HF
   huggingface-cli --version
   # Esperado: >= 0.20.0

   # Python
   python --version
   # Esperado: >= 3.8

   # Git
   git --version
   # Esperado: >= 2.0

5. VERIFICAR CONECTIVIDAD:

   # API de HF accesible
   curl -s https://huggingface.co/api/whoami \
        -H "Authorization: Bearer $(cat ~/.cache/huggingface/token)" \
        | jq .name

   # Debe mostrar tu nombre de usuario

6. DOCUMENTAR VALORES:

   echo "=== CONFIGURACIÓN VERIFICADA ==="
   echo "HF Username: $(huggingface-cli whoami 2>/dev/null | head -1)"
   echo "HF CLI: $(huggingface-cli --version)"
   echo "Python: $(python --version)"
   echo "Git: $(git --version)"
   echo "Space URL será: https://huggingface.co/spaces/$(huggingface-cli whoami 2>/dev/null | head -1 | cut -d: -f2 | tr -d ' ')/cognitia-ollama"

Resultado esperado:
- Todos los comandos ejecutan sin error
- Usuario HF correcto
- Permisos Write confirmados
- Git credentials funcionando
```

## Checklist de Validación

```
VERIFICACIONES PASADAS
[ ] huggingface-cli whoami → muestra usuario
[ ] Crear/eliminar repo de prueba → éxito
[ ] Git clone desde HF → sin pedir password
[ ] Versiones correctas (CLI, Python, Git)
[ ] Conectividad API → responde con usuario

INFORMACIÓN DOCUMENTADA
[ ] Username de HF anotado
[ ] URL del futuro Space calculada
[ ] Token guardado de forma segura
```

## Criterios de Éxito

| Criterio        | Esperado        | Crítico |
| --------------- | --------------- | ------- |
| Login HF        | Usuario visible | Sí      |
| Permisos        | Write           | Sí      |
| Git credentials | Sin password    | Sí      |
| HF CLI version  | >= 0.20.0       | Sí      |
| Conectividad    | API responde    | Sí      |

## Si Falla

### Usuario no aparece

```bash
# Re-login
huggingface-cli logout
huggingface-cli login
```

### Permisos insuficientes

```bash
# Crear nuevo token con Write en:
# https://huggingface.co/settings/tokens
# Luego re-login
```

### Git pide password

```bash
# Configurar credenciales
git config --global credential.helper store
huggingface-cli login
# Seleccionar "Add token as git credential"
```

## Siguiente Paso

Si todos los criterios pasan: Continuar a [1.1-space-ejecutar.md](./1.1-space-ejecutar.md)

Si alguno falla: Corregir según troubleshooting y repetir validación.
