# Etapa 1.1 - Ejecutar Integraci√≥n de Im√°genes

## Objetivo
Implementar servicio unificado de im√°genes con Unsplash (principal) y Pexels (backup).

## Contexto
- Documento de referencia: [`../1-unsplash-integration.md`](../1-unsplash-integration.md)
- Costo: $0 (APIs gratuitas)
- Rate limits: Unsplash 50/hr (demo), Pexels 200/hr

## Prompt de Ejecuci√≥n

```
Implementa el servicio de im√°genes para presentaciones:

1. CONFIGURACI√ìN:
   - Agregar UNSPLASH_ACCESS_KEY y PEXELS_API_KEY a config.py
   - Crear backend/open_webui/utils/image_service.py

2. IMAGE SERVICE (image_service.py):
   - Funci√≥n async search_image(query, size="regular") con fallback:
     a. Buscar en Unsplash
     b. Si falla o no hay resultados ‚Üí buscar en Pexels
     c. Si ambos fallan ‚Üí retornar None
   - Funci√≥n download_image(url) con cache LRU (50 im√°genes max)
   - Funci√≥n extract_keywords(text, max_words=3) para b√∫squeda
   - Retornar: {url, photographer_name, source: "unsplash"|"pexels"}

3. INTEGRACI√ìN EN presentations.py:
   - Importar image_service
   - En slides tipo "content" y "title": buscar imagen relevante
   - Si hay imagen: layout 60% texto / 40% imagen
   - Si no hay imagen: layout full-width texto (graceful degradation)
   - Agregar atribuci√≥n peque√±a (Pt 8) debajo de imagen

4. PLACEHOLDER (cuando no hay imagen):
   - Rect√°ngulo con gradiente brand-100 ‚Üí brand-200
   - Emoji üì∑ centrado (opcional)

Entrega:
- backend/open_webui/utils/image_service.py (nuevo)
- backend/open_webui/config.py (modificado)
- backend/open_webui/tools/presentations.py (modificado)
```

## Checklist Pre-Ejecuci√≥n

- [ ] Tener API keys de Unsplash y Pexels
- [ ] Verificar que httpx est√° instalado
- [ ] Revisar c√≥digo actual de presentations.py

## Archivos a Crear/Modificar

| Archivo | Acci√≥n |
|---------|--------|
| `backend/open_webui/utils/image_service.py` | Crear |
| `backend/open_webui/config.py` | Agregar variables |
| `backend/open_webui/tools/presentations.py` | Integrar servicio |
