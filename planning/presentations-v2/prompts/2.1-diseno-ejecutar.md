# Etapa 2.1 - Ejecutar Mejoras de DiseÃ±o

## Objetivo

Implementar diseÃ±o premium: gradientes, shapes, tipografÃ­a, footer y smart bullets.

## Contexto

- Documento de referencia: [`../2-design-improvements.md`](../2-design-improvements.md)
- Costo: $0 (solo cÃ³digo python-pptx)

## Prompt de EjecuciÃ³n

````
Implementa las mejoras de diseÃ±o en presentations.py:

1. SISTEMA DE DISEÃ‘O (constantes):
   ```python
   GRADIENT_PRESETS = {
       "brand_primary": {"color1": "60a5fa", "color2": "1e40af", "angle": 135},
       "brand_light": {"color1": "dbeafe", "color2": "bfdbfe", "angle": 90},
       "brand_dark": {"color1": "1e40af", "color2": "1e3a8a", "angle": 180},
   }

   FONT_SYSTEM = {
       "title": {"name": "Calibri Light", "size": 44, "bold": False, "color": "1e40af"},
       "heading": {"name": "Calibri", "size": 32, "bold": True, "color": "1e3a8a"},
       "body": {"name": "Calibri", "size": 18, "bold": False, "color": "1f2937"},
       "caption": {"name": "Calibri", "size": 9, "bold": False, "color": "9ca3af"},
   }

   BULLET_ICONS = {
       "default": "â€¢", "check": "âœ“", "arrow": "â†’",
       "star": "â˜…", "warning": "âš ", "idea": "ðŸ’¡",
   }
````

2. FUNCIONES DE DISEÃ‘O:
   - \_apply_gradient_background(slide, preset_name)
   - \_add_decorative_circle(slide, left, top, size, color, opacity)
   - \_apply_font_style(paragraph, style_name)
   - \_get_smart_bullet(content) â†’ bullet icon basado en keywords
   - \_add_branded_footer(slide, slide_num, total_slides)

3. LAYOUTS MODERNOS:
   - Refactorizar \_add_title_slide() con gradiente y cÃ­rculos decorativos
   - Refactorizar \_add_content_slide() con imagen (si disponible)
   - Refactorizar \_add_stats_slide() con cards y colores brand
   - Agregar footer en TODOS los slides (excepto tÃ­tulo)

4. SMART BULLETS:
   - Detectar keywords en contenido de bullets
   - "completado/listo/done" â†’ âœ“
   - "siguiente/prÃ³ximo/paso" â†’ â†’
   - "importante/clave" â†’ â˜…
   - Default â†’ â€¢

5. FOOTER CONSISTENTE:
   - Izquierda: "1/10" (progreso)
   - Derecha: "Powered by Cognitia"
   - Font: Calibri 9pt, gray-400

Entrega:

- backend/open_webui/tools/presentations.py actualizado
- Constantes de diseÃ±o agregadas
- Funciones helper implementadas

````

## Checklist Pre-EjecuciÃ³n

- [ ] Etapa 1 (ImÃ¡genes) completada o en paralelo
- [ ] Revisar cÃ³digo actual de presentations.py
- [ ] Entender estructura de python-pptx shapes

## Archivos a Modificar

| Archivo | Cambios |
|---------|---------|
| `backend/open_webui/tools/presentations.py` | Agregar sistema de diseÃ±o completo |

## Estructura de CÃ³digo Esperada

```python
# ===== DESIGN SYSTEM =====
GRADIENT_PRESETS = {...}
FONT_SYSTEM = {...}
BULLET_ICONS = {...}
KEYWORD_BULLET_MAP = {...}

# ===== DESIGN HELPERS =====
def _apply_gradient_background(slide, preset): ...
def _add_decorative_circle(slide, ...): ...
def _apply_font_style(paragraph, style): ...
def _get_smart_bullet(content): ...
def _add_branded_footer(slide, num, total): ...

# ===== MODERN LAYOUTS =====
def _add_title_slide(prs, slide_def, image_bytes=None): ...
def _add_content_slide(prs, slide_def, image_bytes=None): ...
def _add_stats_slide(prs, slide_def): ...
# ... etc
````
