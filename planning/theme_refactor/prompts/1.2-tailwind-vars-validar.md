# Etapa 1.2 - Validar Variables de Tema en tailwind.css

## Objetivo

Verificar que las variables CSS de tema se compilan correctamente y cambian segun el atributo `data-theme`.

## Prompt de Validacion

```
Valida que las variables CSS de tema se compilan en Tailwind v4:

1. ABRIR NAVEGADOR:
   - Ir a http://localhost:8080 (o la URL del dev server)
   - Abrir DevTools (F12)
   - Ir a Console

2. VERIFICAR QUE VARIABLES EXISTEN:

   Ejecutar en consola:

   ```javascript
   // Test 1: Verificar que la variable existe
   const surfaceBase = getComputedStyle(document.documentElement)
     .getPropertyValue('--color-surface-base').trim();
   console.log('Surface Base actual:', surfaceBase);
   // Deberia mostrar un valor como "23 23 23" (dark) o "249 250 251" (light)
   ```

   RESULTADO ESPERADO: Debe mostrar un valor RGB, NO vacio.

   SI ESTA VACIO: Las variables no se compilaron. Volver a 1.1.

3. VERIFICAR QUE CAMBIAN CON DATA-THEME:

   Ejecutar en consola:

   ```javascript
   // Test 2: Verificar cambio de variables con tema
   const themes = ['light', 'dark', 'oled-dark', 'her'];
   const results = {};

   themes.forEach(theme => {
     document.documentElement.setAttribute('data-theme', theme);
     // Aplicar clase .dark para temas oscuros
     if (theme === 'dark' || theme === 'oled-dark') {
       document.documentElement.classList.add('dark');
     } else {
       document.documentElement.classList.remove('dark');
     }

     const surfaceBase = getComputedStyle(document.documentElement)
       .getPropertyValue('--color-surface-base').trim();

     results[theme] = surfaceBase;
   });

   console.table(results);
   ```

   RESULTADO ESPERADO:
   | Tema       | --color-surface-base |
   |------------|----------------------|
   | light      | 249 250 251          |
   | dark       | 23 23 23             |
   | oled-dark  | 0 0 0                |
   | her        | 255 250 250          |

4. VERIFICAR REGLAS CSS EN STYLESHEETS:

   Ejecutar en consola:

   ```javascript
   // Test 3: Buscar reglas [data-theme] en CSS compilado
   const styleSheets = Array.from(document.styleSheets);
   let dataThemeCount = 0;

   styleSheets.forEach(sheet => {
     try {
       const rules = Array.from(sheet.cssRules || []);
       rules.forEach(rule => {
         if (rule.selectorText && rule.selectorText.includes('data-theme')) {
           dataThemeCount++;
           if (rule.selectorText.includes('data-theme="dark"') ||
               rule.selectorText.includes('data-theme="light"')) {
             console.log('FOUND:', rule.selectorText);
           }
         }
       });
     } catch (e) { /* cross-origin */ }
   });

   console.log('Total reglas data-theme:', dataThemeCount);
   ```

   RESULTADO ESPERADO:
   - Debe encontrar reglas con `[data-theme="dark"]`, `[data-theme="light"]`, etc.
   - Count debe ser > 8 (antes era 8 de Sonner/Tippy, ahora debe haber mas)

5. RESETEAR AL TEMA ORIGINAL:

   ```javascript
   // Restaurar tema guardado
   const savedTheme = localStorage.getItem('theme') || 'dark';
   document.documentElement.setAttribute('data-theme', savedTheme);
   document.documentElement.classList.toggle('dark',
     savedTheme === 'dark' || savedTheme === 'oled-dark');
   ```

Entrega:
- Screenshot de console.table con los 4 valores diferentes
- Confirmacion de que las reglas [data-theme] existen en CSS compilado
- PASS/FAIL
```

## Criterios de Exito

| Test | Descripcion | PASS/FAIL |
|------|-------------|-----------|
| Variable existe | `--color-surface-base` no esta vacio | |
| Light theme | Valor = `249 250 251` | |
| Dark theme | Valor = `23 23 23` | |
| OLED Dark theme | Valor = `0 0 0` | |
| Her theme | Valor = `255 250 250` | |
| CSS Rules | Reglas [data-theme] > 8 en stylesheets | |

## Diagnostico de Problemas

### Si la variable esta vacia:

```
PROBLEMA: Variables no se compilan
CAUSA: El bloque @layer base no esta en tailwind.css o tiene error de sintaxis
SOLUCION: Verificar:
  1. El bloque esta dentro de @layer base { }
  2. No hay errores de sintaxis CSS
  3. El servidor dev no muestra errores
```

### Si todos los temas muestran el mismo valor:

```
PROBLEMA: Variables no cambian con data-theme
CAUSA: Los selectores [data-theme="..."] no estan en el CSS
SOLUCION: Verificar que los selectores estan correctos:
  - [data-theme="light"] (con comillas dobles)
  - [data-theme="dark"]
  - NO [data-theme='light'] (comillas simples pueden fallar)
```

### Si el count de reglas es <= 8:

```
PROBLEMA: Reglas no se estan compilando
CAUSA: Tailwind esta haciendo tree-shaking de las reglas
SOLUCION: Asegurar que el bloque esta en @layer base, no suelto
```

## Resultado Final

### Si todos los tests pasan:

```
ETAPA 1.2: ✅ PASS
- Variables compilan correctamente
- Valores cambian con data-theme
- Listo para continuar a etapa 2

SIGUIENTE: 2.1-app-css-cleanup-ejecutar.md
```

### Si hay failures:

```
ETAPA 1.2: ❌ FAIL
- [Describir que fallo]

ACCION: Volver a 1.1-tailwind-vars-ejecutar.md y corregir
```
