# Etapa 2.1 - Actualizar ChatBox para Theme-Aware

## Contexto

El chatbox (input de mensajes) actualmente usa colores hardcodeados que solo funcionan en dark mode:

- `bg-[#0a0a0a]/80` - fondo negro
- `text-gray-100` - texto claro
- `ring-white/10` - anillo blanco

Esto hace el chatbox ilegible en light mode.

## Archivo a Modificar

```
src/lib/components/chat/MessageInput.svelte
```

## Instrucciones

### 1. Abrir el archivo `src/lib/components/chat/MessageInput.svelte`

### 2. Buscar el contenedor del chatbox (aproximadamente linea 1165-1170)

Buscar:

```svelte
<div id="message-input-container"
  class="flex-1 flex flex-col relative w-full rounded-[2.5rem] border transition px-2 py-1 text-gray-100 backdrop-blur-3xl bg-[#0a0a0a]/80 shadow-[0_10px_40px_-5px_rgba(0,0,0,0.5)] ring-1 ring-white/10 {$temporaryChatEnabled
```

### 3. Reemplazar TODO el bloque de clases

El div completo debe quedar asi:

```svelte
<div id="message-input-container"
  class="flex-1 flex flex-col relative w-full rounded-[2.5rem] border transition px-2 py-1 backdrop-blur-3xl
         text-gray-900 dark:text-gray-100
         bg-white/95 dark:bg-[rgb(var(--color-chatbox-bg))]
         shadow-lg dark:shadow-[var(--color-chatbox-shadow)]
         ring-1 ring-gray-200/50 dark:ring-[rgb(var(--color-chatbox-ring))]
         {$temporaryChatEnabled
           ? 'border-dashed border-gray-300 dark:border-gray-500/30 hover:border-gray-400 dark:hover:border-gray-400/50 focus-within:border-blue-500/50'
           : 'border-gray-200 dark:border-white/5 hover:border-gray-300 dark:hover:border-white/10 focus-within:border-blue-500/40 focus-within:shadow-[0_0_30px_rgba(59,130,246,0.2)]'}"
  dir={$settings?.chatDirection ?? 'auto'}
>
```

### 4. Guardar el archivo

### 5. Verificar en el navegador

El chatbox deberia verse:

- **Light mode**: Fondo blanco, texto oscuro, borde gris claro
- **Dark mode**: Fondo oscuro semi-transparente (como antes), texto claro

## Detalles del Cambio

| Propiedad | Antes (hardcoded)         | Despues (theme-aware)                                         |
| --------- | ------------------------- | ------------------------------------------------------------- |
| Texto     | `text-gray-100`           | `text-gray-900 dark:text-gray-100`                            |
| Fondo     | `bg-[#0a0a0a]/80`         | `bg-white/95 dark:bg-[rgb(var(--color-chatbox-bg))]`          |
| Sombra    | `shadow-[0_10px_40px...]` | `shadow-lg dark:shadow-[var(--color-chatbox-shadow)]`         |
| Ring      | `ring-white/10`           | `ring-gray-200/50 dark:ring-[rgb(var(--color-chatbox-ring))]` |
| Borde     | `border-white/5`          | `border-gray-200 dark:border-white/5`                         |

## Rollback

```bash
git checkout HEAD -- src/lib/components/chat/MessageInput.svelte
```

## Siguiente Paso

Ejecutar `2.2-chatbox-theme-validar.md` para verificar el chatbox en todos los temas.
