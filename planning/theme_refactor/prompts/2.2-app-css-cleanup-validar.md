# Etapa 2.2 - Validar Cleanup de app.css

## Objetivo

Verificar que el body ahora responde a cambios de tema usando variables CSS.

## Prompt de Validacion

```
Valida que el body responde correctamente a cambios de tema:

1. ABRIR NAVEGADOR:
   - Ir a http://localhost:8080
   - Abrir DevTools (F12)
   - Ir a Console

2. TEST PRINCIPAL - VERIFICAR BODY BACKGROUND:

   Ejecutar en consola:

   ```javascript
   // Test: Verificar que body background cambia con cada tema
   const themes = ['light', 'dark', 'oled-dark', 'her'];
   const results = {};

   themes.forEach(theme => {
     document.documentElement.setAttribute('data-theme', theme);
     if (theme === 'dark' || theme === 'oled-dark') {
       document.documentElement.classList.add('dark');
     } else {
       document.documentElement.classList.remove('dark');
     }

     // Forzar recalculo de estilos
     const bodyStyle = getComputedStyle(document.body);

     results[theme] = {
       backgroundColor: bodyStyle.backgroundColor,
       color: bodyStyle.color
     };
   });

   console.table(results);
   ```

   RESULTADO ESPERADO:

   | Tema       | backgroundColor        | color                 |
   |------------|------------------------|-----------------------|
   | light      | rgb(249, 250, 251)     | rgb(15, 23, 42)       |
   | dark       | rgb(23, 23, 23)        | rgb(248, 250, 252)    |
   | oled-dark  | rgb(0, 0, 0)           | rgb(248, 250, 252)    |
   | her        | rgb(255, 250, 250)     | rgb(23, 23, 23)       |

3. VERIFICAR TRANSICION:

   En la consola, alternar temas rapidamente:

   ```javascript
   // Test visual de transicion
   let i = 0;
   const themes = ['light', 'dark', 'oled-dark', 'her'];

   const interval = setInterval(() => {
     const theme = themes[i % themes.length];
     document.documentElement.setAttribute('data-theme', theme);
     document.documentElement.classList.toggle('dark',
       theme === 'dark' || theme === 'oled-dark');
     console.log('Tema:', theme);
     i++;
     if (i >= 8) clearInterval(interval);
   }, 1000);
   ```

   OBSERVAR: El fondo debe cambiar suavemente (transicion 0.15s).

4. VERIFICAR QUE NO HAY ESTILOS HARDCODEADOS:

   En DevTools > Elements:
   - Seleccionar el elemento `<body>`
   - En el panel Styles, verificar que NO aparece:
     - `background: #fff`
     - `background: #171717`
   - DEBE aparecer:
     - `background-color: rgb(var(--color-surface-base))`

5. VERIFICAR app.css NO TIENE DUPLICADOS:

   En la terminal, contar lineas:

   ```bash
   wc -l src/app.css
   ```

   ANTES: ~1010 lineas
   DESPUES: ~840 lineas (aprox -170 lineas)

6. RESTAURAR TEMA:

   ```javascript
   const savedTheme = localStorage.getItem('theme') || 'dark';
   document.documentElement.setAttribute('data-theme', savedTheme);
   document.documentElement.classList.toggle('dark',
     savedTheme === 'dark' || savedTheme === 'oled-dark');
   ```

Entrega:
- Screenshot de console.table mostrando 4 backgrounds diferentes
- Confirmacion visual de transicion suave
- Confirmacion de lineas reducidas en app.css
- PASS/FAIL
```

## Criterios de Exito

| Test | Descripcion | PASS/FAIL |
|------|-------------|-----------|
| Light BG | `rgb(249, 250, 251)` | |
| Dark BG | `rgb(23, 23, 23)` | |
| OLED BG | `rgb(0, 0, 0)` | |
| Her BG | `rgb(255, 250, 250)` | |
| Transicion | Cambio suave visible | |
| No hardcodes | Sin `#fff` o `#171717` en body | |
| Lineas reducidas | app.css < 900 lineas | |

## Diagnostico de Problemas

### Si el background no cambia:

```
PROBLEMA: Body background estatico
CAUSA POSIBLE:
  1. app.css aun tiene estilos hardcodeados
  2. Variables no estan siendo aplicadas

SOLUCION:
  1. Buscar en app.css: `background: #` - debe dar 0 resultados en body
  2. Verificar que body tiene: background-color: rgb(var(--color-surface-base))
```

### Si el background es transparente o blanco:

```
PROBLEMA: Variable devuelve valor invalido
CAUSA: Formato de valor incorrecto o variable no existe

SOLUCION:
  1. Verificar en tailwind.css que --color-surface-base existe
  2. Verificar formato: "23 23 23" (sin comas, sin #)
```

### Si no hay transicion:

```
PROBLEMA: Cambio de tema es instantaneo
CAUSA: Falta propiedad transition en body

SOLUCION: Agregar a body en app.css:
  transition: background-color 0.15s ease, color 0.15s ease;
```

## Resultado Final

### Si todos los tests pasan:

```
ETAPA 2.2: ✅ PASS
- Body background responde a data-theme
- Transicion suave funciona
- No hay estilos hardcodeados
- Codigo limpio

SIGUIENTE: 3.1-app-html-splash-ejecutar.md
```

### Si hay failures:

```
ETAPA 2.2: ❌ FAIL
- [Describir que fallo]

ACCION: Volver a 2.1-app-css-cleanup-ejecutar.md y corregir
```
