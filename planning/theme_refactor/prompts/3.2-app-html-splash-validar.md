# Etapa 3.2 - Validacion Final del Sistema de Temas

## Objetivo

Verificar que TODO el sistema de temas funciona correctamente: splash screen, body, y persistencia.

## Prompt de Validacion

```
Realiza validacion completa del sistema de temas:

1. LIMPIAR ESTADO:

   En DevTools Console:
   ```javascript
   localStorage.removeItem('theme');
   location.reload();
   ```

   OBSERVAR: La pagina debe cargar con tema dark (default).

2. TEST COMPLETO DE CADA TEMA:

   Para cada tema, realizar el ciclo completo:

   A. TEMA LIGHT:
   ```javascript
   localStorage.setItem('theme', 'light');
   location.reload();
   ```
   - [ ] Splash screen: fondo claro
   - [ ] Body background: rgb(249, 250, 251)
   - [ ] Texto legible (oscuro sobre claro)

   B. TEMA DARK:
   ```javascript
   localStorage.setItem('theme', 'dark');
   location.reload();
   ```
   - [ ] Splash screen: fondo oscuro #171717
   - [ ] Body background: rgb(23, 23, 23)
   - [ ] Texto legible (claro sobre oscuro)

   C. TEMA OLED-DARK:
   ```javascript
   localStorage.setItem('theme', 'oled-dark');
   location.reload();
   ```
   - [ ] Splash screen: fondo negro puro
   - [ ] Body background: rgb(0, 0, 0)
   - [ ] Texto legible

   D. TEMA HER:
   ```javascript
   localStorage.setItem('theme', 'her');
   location.reload();
   ```
   - [ ] Splash screen: fondo rosado
   - [ ] Body background: rgb(255, 250, 250)
   - [ ] Colores de marca rosados

3. VERIFICAR SELECTOR DE TEMA (si tienes acceso a Settings):

   Si puedes hacer login:
   - Ir a Settings > General
   - Cambiar tema usando el dropdown
   - Verificar que el cambio es inmediato (sin reload)
   - Verificar que persiste despues de reload

4. VERIFICAR ATRIBUTO DATA-THEME:

   En DevTools Console:
   ```javascript
   console.log('data-theme:', document.documentElement.getAttribute('data-theme'));
   console.log('.dark class:', document.documentElement.classList.contains('dark'));
   console.log('localStorage.theme:', localStorage.getItem('theme'));
   ```

   Todos deben ser consistentes.

5. TEST DE CONTRASTE (WCAG AA):

   Para cada tema, verificar visualmente:
   - [ ] Texto principal es facilmente legible
   - [ ] Links son distinguibles
   - [ ] Botones tienen contraste suficiente

6. TEST MOBILE (opcional):

   - Abrir en viewport mobile (375px)
   - Verificar que los temas funcionan igual
   - Verificar meta theme-color cambia con tema

Entrega:
- Checklist completado para los 4 temas
- Screenshots de cada tema (opcional)
- Confirmacion de persistencia
- PASS/FAIL global
```

## Matriz de Validacion

### Tema Light

| Elemento | Esperado | Actual | PASS/FAIL |
|----------|----------|--------|-----------|
| localStorage.theme | "light" | | |
| data-theme | "light" | | |
| .dark class | false | | |
| body background | rgb(249, 250, 251) | | |
| body color | rgb(15, 23, 42) | | |
| Splash background | claro/blanco | | |

### Tema Dark

| Elemento | Esperado | Actual | PASS/FAIL |
|----------|----------|--------|-----------|
| localStorage.theme | "dark" | | |
| data-theme | "dark" | | |
| .dark class | true | | |
| body background | rgb(23, 23, 23) | | |
| body color | rgb(248, 250, 252) | | |
| Splash background | oscuro #171717 | | |

### Tema OLED Dark

| Elemento | Esperado | Actual | PASS/FAIL |
|----------|----------|--------|-----------|
| localStorage.theme | "oled-dark" | | |
| data-theme | "oled-dark" | | |
| .dark class | true | | |
| body background | rgb(0, 0, 0) | | |
| body color | rgb(248, 250, 252) | | |
| Splash background | negro puro | | |

### Tema Her

| Elemento | Esperado | Actual | PASS/FAIL |
|----------|----------|--------|-----------|
| localStorage.theme | "her" | | |
| data-theme | "her" | | |
| .dark class | false | | |
| body background | rgb(255, 250, 250) | | |
| body color | rgb(23, 23, 23) | | |
| Splash background | rosado | | |

## Resultado Final

### Si TODOS los temas pasan:

```
============================================
  THEME SYSTEM REFACTOR: ✅ COMPLETADO
============================================

LIGHT:      ✅ PASS
DARK:       ✅ PASS
OLED DARK:  ✅ PASS
HER:        ✅ PASS

PERSISTENCIA: ✅ PASS
CONTRASTE:    ✅ WCAG AA Compliant

============================================
  LISTO PARA COMMIT
============================================

Comando sugerido:

git add src/tailwind.css src/app.css src/app.html
git commit -m "fix(theme): move CSS variables to @layer base for Tailwind v4

- Move [data-theme] variable definitions to tailwind.css @layer base
- Replace hardcoded body colors with CSS variable references
- Update splash screen to use CSS variables with fallbacks
- Fixes OLED dark theme showing wrong background
- Fixes surface colors not changing between themes

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
```

### Si hay failures:

```
============================================
  THEME SYSTEM REFACTOR: ❌ INCOMPLETO
============================================

TEMAS CON PROBLEMAS:
- [listar temas que fallaron]

ACCIONES:
1. Identificar cual etapa fallo
2. Volver al prompt de ejecucion correspondiente
3. Corregir y volver a validar

NO HACER COMMIT hasta que todos los temas pasen.
```

## Rollback (si es necesario)

```bash
# Revertir todos los cambios
git checkout HEAD -- src/tailwind.css src/app.css src/app.html

# O restaurar archivo especifico
git checkout HEAD -- src/app.css
```

## Archivos Finales Modificados

| Archivo | Cambios |
|---------|---------|
| `src/tailwind.css` | +100 lineas (variables de tema en @layer base) |
| `src/app.css` | -170 lineas (removidos duplicados), +5 lineas (body vars) |
| `src/app.html` | ~5 lineas (splash usa variables CSS) |
